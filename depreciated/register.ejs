<%- include("./partials/header.ejs") %> 

<h1>Sign up</h1>
<form action="/register" id="form" method="POST">
    <input type="text" name="username" placeholder="username" required>
    <input id="admin" class="admin-hide" type="text" name="adminCode" placeholder="admin code">
    <input id="phone" type="number" name="phone" placeholder="phone" required>
    <input id="email" type="email" name="email" placeholder="email" required>
    <input id="password" type="password" name="password" placeholder="password" required>
    <button type="submit">Sign Up</button>
</form>

<script>
const password = document.getElementById('password')
const form = document.getElementById('form')
const email = document.getElementById('email')
const phone = document.getElementById('phone')

form.addEventListener('submit', (e) => {
  let messages = []
  var allLetters = /^[a-zA-Z]+$/;
  var letter = /[a-zA-Z]/;
  var number = /[0-9]/;
  var filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;

  if(phone.value.length != 10 || (phone.value)[0] == 1 || (phone.value)[0] == 2 || (phone.value)[0] == 3 || (phone.value)[0] == 4 || (phone.value)[0] == 5 || (phone.value)[0] == 0){
    messages.push('Please provide a valid phone number')
    alert('Please provide a valid phone number');
  }
  if (!filter.test(email.value)) {
    messages.push('Please provide a valid email address')
    alert('Please provide a valid email address');
  }
  if (password.value.length < 6) {
    messages.push('Password must be longer than 6 characters')
    alert("Password must be longer than 6 characters")
  } else if(!letter.test(password.value)) {
    messages.push('Password must contain atleast 1 letter')
    alert("Password must contain atleast 1 letter")
  }
  else if(!number.test(password.value)) {
    messages.push('Password must contain atleast 1 number')
    alert('Password must contain atleast 1 number')
  }
  if (messages.length > 0) {
    e.preventDefault()
    messages=[]
  }
})  

  document.addEventListener('keydown', function(event) {
      // event.preventDefault()
    let keys = document.getElementById("admin")
    if (event.ctrlKey  && event.key === 'v' && event.altKey) {
        alert("You are an admin")
        keys.classList.remove("admin-hide")
        keys.classList.add("admin-show")
  }
});
</script>
<%- include("./partials/footer.ejs") %>